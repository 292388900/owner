<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>OWNER by lviggiano</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>OWNER</h1>
        <p>Java™ properties files made super simple!</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/lviggiano/owner" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/lviggiano/owner/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/lviggiano/owner/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>OWNER</h1>

<p>OWNER, a simple API to ease Java™ property files usage.</p>

<h2>INTRODUCTION</h2>

<p>The inspiring idea for this API comes from GWT i18n (see <a href="https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nConstants">here</a>).</p>

<p>The problem in using GWT i18n for loading property files is that it only works in client code (JavaScript), 
not standard Java™ classes.
Also, GWT is a big library and it is designed for different purposes. </p>

<p>Since I liked the approach I decided to implement something similar, and here we are.</p>

<h2>USAGE</h2>

<p>The approach used by OWNER APIs, is to define a Java™ interface associated to a Java™ properties file.</p>

<p>Suppose your properties file is defined as ServerConfig.properties:</p>

<pre><code>port=80
hostname=foobar.com
maxThreads=100
</code></pre>

<p>To access this property you need to define a convenient Java™ interface in ServerConfig.java:</p>

<pre><code>public interface ServerConfig extends Config {
    int port();
    String hostname();
    int maxThreads();
}
</code></pre>

<p>Then, you can use it from inside your code:</p>

<pre><code>public class MyApp {    
    public static void main(String[] args) {
        ServerConfig cfg = ConfigFactory.create(ServerConfig.class);
        System.out.println("Server " + cfg.hostname() + ":" + cfg.port() + " will run " + cfg.maxThreads());
    }
}
</code></pre>

<p>The mapping between the Java™ interface and the properties file can be automatically resolved by OWNER API.
By default OWNER API tries to load the properties for the interface com.foo.bar.ServerConfig from the classpath as
com.foo.bar.ServerConfig.properties; then it tries to assoaciate every method of the interface to the property keys 
contained in the properties file.</p>

<p>This default mapping can be tailored to your needs using some annotations on the interface. </p>

<p>Example:</p>

<pre><code>@Sources({ "file:~/.myapp.config", "file:/etc/myapp.config", "classpath:foo/bar/baz.properties" })
public interface ServerConfig extends Config {

    @Key("server.http.port")
    int port();

    @Key("server.host.name")
    String hostname();

    @Key("server.max.threads");
    @DefaultValue("42")
    int maxThreads();
}
</code></pre>

<p>In the above example, OWNER will try to load the properties from several <code>@Sources</code>:</p>

<ol>
<li>first, it will try to load from user's home directory ~/.myapp.config</li>
<li>if the previous attempt fails, then it will try to load the properties from /etc/myapp.config</li>
<li>and, as last resort, it will try to load the properties from the classpath loding the resource identified by the path foo/bar/baz.properties</li>
</ol><p>In the <code>@Sources</code> annotation you can also specify system properties and/or environment variables with the syntax 
<code>file:${user.home}/.myapp.config</code> (this gets resolved by 'user.home' System property) or <code>file:${HOME}/.myapp.config</code><br>
(this gets resolved by the$HOME environment variable). The <code>~</code> used in the previous example is another example of 
variable expansion, and it is equivalent to <code>${user.home}</code></p>

<p>Did you notice that there is also the <code>@DefaultValue("42")</code> annotation specified in the example?
This annotation gets automatically converted to <code>int</code>, since <code>maxThreads()</code> returns an <code>int</code>, and the value specified is 
used as default, if <code>server.max.threads</code> key is not specified in the property file.</p>

<p>The <code>@DefaultValue</code> is very confortable to use, and the basic type conversion between the <code>String</code> value and the method 
return type are done automatically.</p>

<h3>UNDEFINED PROPERTIES</h3>

<p>If, in the example, ServerConfig interface cannot be mapped to any properties file, then all the methods in the interface 
will return <code>null</code>, unless on the methods it is defined a <code>@DefaultValue</code> annotation, of course.</p>

<p>If, in the example, we omit <code>@DefaultValue</code> for <code>maxThreads()</code> and we forget to define the property key in the properties 
files, <code>null</code> will be used as default value.</p>

<h3>PARAMETRIZED PROPERTIES</h3>

<p>Another neat feature, is the possibility to provide parameters on method interfaces, then the property value shall respect 
the positional notation specified by the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax"><code>java.util.Formatter</code></a> class.</p>

<p>Example: </p>

<pre><code>public interface SampleParamConfig extends Config {
    @DefaultValue("Hello Mr. %s!")
    String helloMr(String name);
}

SampleParamConfig cfg = ConfigFactory.create(SampleParamConfig.class);
System.out.println(cfg.helloMr("Luigi")); // will println 'Hello Mr. Luigi!'
</code></pre>

<h2>JAVADOCS</h2>

<p>API javadocs can be found <a href="http://lviggiano.github.com/owner/target/site/apidocs/index.html">here</a>.</p>

<h2>BUILD</h2>

<p>OWNER uses maven to build.</p>

<pre><code>$ git clone git://github.com/lviggiano/owner.git
$ cd owner
$ mvn install
</code></pre>

<p>This will install OWNER jars in your local maven repository. Or, you can pick the jar files from the target directory.</p>

<h2>MAVEN</h2>

<p>If you are using maven, you can add the OWNER dependency in your project.</p>

<p>First you need to add the OWNER repository:</p>

<pre><code>&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;owner-repo&lt;/id&gt;
        &lt;url&gt;http://lviggiano.github.com/owner/target/repo/release&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>

<p>Then you can get the dependency:</p>

<pre><code>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;owner&lt;/groupId&gt;
        &lt;artifactId&gt;owner&lt;/artifactId&gt;
        &lt;version&gt;1.0.1&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

<p>In future, I may try to upload the jars in Maven Central Repository, so this won't be necessary.</p>

<h2>DEPENDENCIES</h2>

<p>OWNER 1.0 has <a href="http://commons.apache.org/lang/">commons-lang</a> transitive dependency, to do some variable expansions.</p>

<p>OWNER 1.0.1 has no transitive dependencies.</p>

<h2>DOWNLOADS</h2>

<p>You can download pre-built binaries from following links:</p>

<ul>
<li><a href="http://lviggiano.github.com/owner/target/owner-1.0.1-bin.tar.bz2">http://lviggiano.github.com/owner/target/owner-1.0.1-bin.tar.bz2</a></li>
<li><a href="http://lviggiano.github.com/owner/target/owner-1.0.1-bin.tar.gz">http://lviggiano.github.com/owner/target/owner-1.0.1-bin.tar.gz</a></li>
<li><a href="http://lviggiano.github.com/owner/target/owner-1.0.1-bin.zip">http://lviggiano.github.com/owner/target/owner-1.0.1-bin.zip</a></li>
</ul><h2>TESTS</h2>

<p>OWNER codebase is very compact, and it is <a href="http://lviggiano.github.com/owner/target/site/cobertura/index.html">fully covered</a> by unit tests.</p>

<p>To execute the tests, you need maven properly installed and configured, 
then run the following command from the distribution root:</p>

<pre><code>$ mvn test
</code></pre>

<h2>FAQ</h2>

<h3>What does "OWNER" name mean?</h3>

<p>Since this API is used to access <em>Properties</em> files, and we implement interfaces to deal with those, 
somehow interfaces are <em>owners</em> for the properties. So here comes the name OWNER.</p>

<h3>Is OWNER a stable API?</h3>

<p>The codebase is very compact, and the test coverage is almost 100%. So there shouldn't be many bugs to deal with.
You have the source, you can help improving the library and fix the bugs if you find some.</p>

<p>Still, OWNER is very early, and APIs may change in the
future to add/change some behaviors. 
For example I would like to specify an annotation to define additional properties load policies. 
But the goal is to keep the API backward compatible.</p>

<h2>LICENSE</h2>

<p>OWNER is released under the BSD license. </p>

<p>See <a href="https://raw.github.com/lviggiano/owner/master/LICENSE">LICENSE</a> file included for the details.</p>

<h2>MORE INFORMATION</h2>

<p>Refer to the documentation on the <a href="http://lviggiano.github.com/owner">web site</a>
or <a href="https://github.com/lviggiano/owner/wiki">github wiki</a> for further details on how to use the OWNER API.</p>

<p>If you find some bug or have any request open an issue on <a href="https://github.com/lviggiano/owner/issues">github issues</a>.</p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/lviggiano">lviggiano</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-462505-8");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>