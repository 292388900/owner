<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>Loading strategies</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="OWNER • Java™ properties reinvented. - Feed" href="/feed.xml" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to OWNER’s master branch" href="https://github.com/lviggiano/owner/commits/master.atom" />
  <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Arizonia' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="http://localhost:4000/css/normalize.css" />
  <link rel="stylesheet" href="http://localhost:4000/css/gridism.css" />
  <link rel="stylesheet" href="http://localhost:4000/css/style.css" />
  <link rel="stylesheet" href="http://localhost:4000/css/pygments.css" />
  <link rel="icon" type="image/x-icon" href="http://localhost:4000/favicon.png" />
  <script src="http://localhost:4000/js/modernizr-2.5.3.min.js"></script>
</head>


<body class="wrap">

  <header>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="http://localhost:4000/">Overview</a>
  </li>
  <li class="current">
    <a href="http://localhost:4000/docs/welcome">Doc<span class="show-on-mobiles">s</span><span class="hide-on-mobiles">umentation</span></a>
  </li>
  <li class="">
    <a href="http://localhost:4000/news">News</a>
  </li>
  <li class="">
    <a href="https://github.com/lviggiano/owner"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <a href="http://localhost:4000/">
        <h1>
          <span class="shadow">OWNER</span>
        </h1>
        <small class="shadow">Java&trade; properties reinvented.</small>
      </a>
    </div>
    <nav class="main-nav unit two-thirds hide-on-mobiles">
      <ul>
  <li class="">
    <a href="http://localhost:4000/">Overview</a>
  </li>
  <li class="current">
    <a href="http://localhost:4000/docs/welcome">Doc<span class="show-on-mobiles">s</span><span class="hide-on-mobiles">umentation</span></a>
  </li>
  <li class="">
    <a href="http://localhost:4000/news">News</a>
  </li>
  <li class="">
    <a href="https://github.com/lviggiano/owner"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
  <div class="ribbon">
    <a href="https://github.com/lviggiano/owner"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
  </div>
</header>


    <section class="docs">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
    <select onchange="if (this.value) window.location.href=this.value">

        <option value="">Navigate the docs…</option>

        <optgroup label="Getting started">
            <option value="http://localhost:4000/docs/welcome/">Welcome</option>
            <option value="http://localhost:4000/docs/installation/">Installation
            </option>
            <option value="http://localhost:4000/docs/usage/">Basic usage</option>
        </optgroup>

        <optgroup label="More Features">
            <option value="http://localhost:4000/docs/loading-strategies/">Loading strategies</option>
            <option value="http://localhost:4000/docs/importing-properties/">Importing properties</option>
            <option value="http://localhost:4000/docs/parametrized-properties/">Parametrized properties</option>
            <option value="http://localhost:4000/docs/type-conversion/">Type conversion</option>
            <option value="http://localhost:4000/docs/variables-expansion/">Variables expansion</option>
            <option value="http://localhost:4000/docs/reload/">Reload and Hot Reload</option>
            <option value="http://localhost:4000/docs/accessible-mutable/">Accessible and Mutable</option>
            <option value="http://localhost:4000/docs/debugging/">Debugging</option>
            <option value="http://localhost:4000/docs/disabling-features/">Disabling features</option>
            <option value="http://localhost:4000/docs/configuring/">Metaconfiguring</option>
            <option value="http://localhost:4000/docs/xml-support/">XML support</option>
            <option value="http://localhost:4000/docs/event-support/">Event support</option>
            <option value="http://localhost:4000/docs/singleton/">Singleton</option>
        </optgroup>

        <optgroup label="Miscellaneous">
            <option value="http://localhost:4000/docs/features/">Features</option>
            <option value="http://localhost:4000/docs/why/">Why OWNER?</option>
            <option value="http://localhost:4000/docs/faq/">FAQ</option>
            <option value="http://localhost:4000/docs/support/">Getting support</option>
        </optgroup>

        <optgroup label="Meta">
            <option value="http://localhost:4000/docs/building/">Building from sources</option>
            <option value="http://localhost:4000/docs/contributing/">Contributing</option>
            <option value="http://localhost:4000/docs/license/">License</option>
        </optgroup>

        <optgroup label="Other stuff">
            <option value="http://localhost:4000/news/releases/">History</option>
            <option value="http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.aeonbits.owner%22%20AND%20a%3A%22owner%22">Downloads</option>
            <option value="https://github.com/lviggiano/owner/releases">Releases</option>
            <option value="http://owner.newinstance.it/latest/apidocs/index.html">Javadocs</option>
            <option value="https://aeonbits.ci.cloudbees.com/job/owner-api/">Jenkins reports</option>
            <option value="https://travis-ci.org/lviggiano/owner">Travis CI reports</option>
            <option value="http://dev.aeonbits.org:9000/dashboard/index/org.aeonbits.owner:owner">Sonar reports</option>
            <option value="https://coveralls.io/r/lviggiano/owner">Coveralls reports</option>
            <option value="http://newinstance.it/owner/latest/">Maven site</option>
            <option value="https://www.ohloh.net/p/owner">OWNER at Ohloh</option>
        </optgroup>

    </select>
</div>


      <div class="unit four-fifths">
        <article>
          <h1>Loading strategies</h1>
          <p>The properties file for a <em>mapping interface</em> is automatically resolved by OWNER 
API by matching the class name and the file name (appending <code>.properties</code> of 
course).  </p>

<p>But this logic can be tailored to your needs using some additional annotations:  </p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Sources</span><span class="o">({</span> <span class="s">&quot;file:~/.myapp.config&quot;</span><span class="o">,</span> 
           <span class="s">&quot;file:/etc/myapp.config&quot;</span><span class="o">,</span> 
           <span class="s">&quot;classpath:foo/bar/baz.properties&quot;</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ServerConfig</span> <span class="kd">extends</span> <span class="n">Config</span> <span class="o">{</span>
    <span class="nd">@Key</span><span class="o">(</span><span class="s">&quot;server.http.port&quot;</span><span class="o">)</span>
    <span class="kt">int</span> <span class="nf">port</span><span class="o">();</span>

    <span class="nd">@Key</span><span class="o">(</span><span class="s">&quot;server.host.name&quot;</span><span class="o">)</span>
    <span class="n">String</span> <span class="nf">hostname</span><span class="o">();</span>

    <span class="nd">@Key</span><span class="o">(</span><span class="s">&quot;server.max.threads&quot;</span><span class="o">);</span>
    <span class="nd">@DefaultValue</span><span class="o">(</span><span class="s">&quot;42&quot;</span><span class="o">)</span>
    <span class="kt">int</span> <span class="nf">maxThreads</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>
<p>In the above example, OWNER will try to load the properties from several <code>@Sources</code>:</p>

<ol>
<li>First, it will try to load the properties file from user&#39;s home directory ~/.myapp.config, if this is found, this
file alone will be used.</li>
<li>If the previous attempt fails, then it will try to load the properties file from /etc/myapp.config, and if this is
found, this one will be used.</li>
<li>As last resort, it will try to load the properties from the classpath loading the resource identified by the
path foo/bar/baz.properties.</li>
<li>If none of the previous URL resources is found, then the Java interface will not be associated to any file, and only
<code>@DefaultValue</code> will be used where specified. Where properties don&#39;t have a default value, <code>null</code> will be returned
(as it happens for <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>).</li>
</ol>

<p>In the above case, the properties values will be loaded from only one file: the first that is found.
<em>Only the first available properties file will be loaded, others will be ignored</em>.</p>

<p>This load logic, is identified as <em>&quot;FIRST&quot;</em>, since only the first file found will be considered, and it is the default
logic adopted when the <code>@Source</code> annotation is specified with multiple URLs.<br>
You can also specify this load policy explicitly using <code>@LoadPolicy(LoadType.FIRST)</code> on the interface declaration.</p>

<p>But what if you want to have some <em>overriding</em> between properties? This is definitely possible: you can do it with
the annotation <code>@LoadPolicy(LoadType.MERGE)</code>:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@LoadPolicy</span><span class="o">(</span><span class="n">LoadType</span><span class="o">.</span><span class="na">MERGE</span><span class="o">)</span>
<span class="nd">@Sources</span><span class="o">({</span> <span class="s">&quot;file:~/.myapp.config&quot;</span><span class="o">,</span> 
           <span class="s">&quot;file:/etc/myapp.config&quot;</span><span class="o">,</span> 
           <span class="s">&quot;classpath:foo/bar/baz.properties&quot;</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ServerConfig</span> <span class="kd">extends</span> <span class="n">Config</span> <span class="o">{</span>
    <span class="o">...</span>
<span class="o">}</span>
</code></pre></div>
<p>In this case, for <em>every property</em> all the specified URLs will be queries, and the first resource defining the property
will prevail.
More in detail, this is what will happen:</p>

<ol>
<li>First, it will try to load the given property from ~/.myapp.config;
if the given property is found the associated value will be returned.</li>
<li>Then it will try to load the given property from /etc/myapp.config;
if the property is found the value associated will be returned.</li>
<li>As last resort it will try to load the given property from the classpath from the resource identified
by the path foo/bar/baz.properties; if the property is found, the associated value is returned.</li>
<li>If the given property is not found of any of the above cases, it will be returned the value specified by the
<code>@DefaultValue</code> if specified, otherwise null will be returned.</li>
</ol>

<p>So basically we produce a merge between the properties files where the first property files overrides latter ones.</p>

<p>The <code>@Sources</code> annotation considers system properties and/or environment variables with the syntax
<code>file:${user.home}/.myapp.config</code> (this gets resolved by &#39;user.home&#39; system property) or <code>file:${HOME}/.myapp.config</code>
(this gets resolved by the$HOME environment variable). The <code>~</code> used in the previous example is another example of
variable expansion, and it is equivalent to <code>${user.home}</code>.</p>

          <div class="section-nav">
  <div class="left align-right">
    
      <a href="http://localhost:4000/docs/usage" class="prev">
        Back
      </a>
    
  </div>
  <div class="right align-left">
    
      <a href="http://localhost:4000/docs/importing-properties" class="next">
        Next
      </a>
    
  </div>
  <div class="clear"></div>
</div>


        </article>
      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>

    <h4>Getting Started</h4>
    <ul>
      <li class="">
        <a href="http://localhost:4000/docs/welcome">Welcome</a>
      </li>
      <li class="">
        <a href="http://localhost:4000/docs/installation">Installation</a>
      </li>
      <li class="">
        <a href="http://localhost:4000/docs/usage">Basic usage</a>
      </li>
    </ul>

    <h4>More Features</h4>
    <ul>
    <li class="current">
    <a href="http://localhost:4000/docs/loading-strategies">Loading strategies</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/importing-properties">Importing properties</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/parametrized-properties/">Parametrized properties</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/type-conversion/">Type conversion</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/variables-expansion/">Variables expansion</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/reload/">Reload and Hot Reload</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/accessible-mutable/">Accessible and Mutable</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/debugging/">Debugging</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/disabling-features/">Disabling features</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/configuring/">Metaconfiguring</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/xml-support/">XML support</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/event-support/">Event support</a>
    </li>
    <li class="">
    <a href="http://localhost:4000/docs/singleton/">Singleton</a>
    </li>
</ul>


    <h4>Miscellaneous</h4>
    <ul>
        <li class="">
            <a href="http://localhost:4000/docs/features/">Features</a>
        </li>
        <li class="">
          <a href="http://localhost:4000/docs/why/">Why OWNER?</a>
        </li>
        <li class="">
            <a href="http://localhost:4000/docs/faq/">FAQ</a>
        </li>

        <li class="">
            <a href="http://localhost:4000/docs/support/">Getting support</a>
        </li>
    </ul>

    <h4>Meta</h4>
    <ul>
      <li class="">
        <a href="http://localhost:4000/docs/building">Building from sources</a>
      </li>
      <li class="">
        <a href="http://localhost:4000/docs/contributing">Contributing</a>
      </li>
      <li class="">
        <a href="http://localhost:4000/docs/license">License</a>
      </li>
    </ul>

    <h4>Other stuff</h4>
    <ul>
      <li><a href="http://localhost:4000/news/releases/">History</a></li>
      <li><a href="http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.aeonbits.owner%22%20AND%20a%3A%22owner%22">Downloads</a></li>
      <li><a href="https://github.com/lviggiano/owner/releases">Releases</a></li>
      <li><a href="http://owner.newinstance.it/latest/apidocs/index.html">Javadocs</a></li>
      <li><a href="https://aeonbits.ci.cloudbees.com/job/owner-api/">Jenkins reports</a></li>
      <li><a href="https://travis-ci.org/lviggiano/owner">Travis CI reports</a></li>
      <li><a href="http://dev.aeonbits.org:9000/dashboard/index/org.aeonbits.owner:owner">Sonar reports</a></li>
      <li><a href="https://coveralls.io/r/lviggiano/owner">Coveralls reports</a></li>
      <li><a href="http://newinstance.it/owner/latest/">Maven site</a></li>
      <li><a href="https://www.ohloh.net/p/owner">OWNER at Ohloh</a></li>
    </ul>

  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer>
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <p>Project maintained by <a href="https://github.com/lviggiano">Luigi R. Viggiano</a>,
          and the <a href="https://github.com/lviggiano/owner/graphs/contributors">awesome contributors</a>.</p>
    </div>
    <div class="unit two-thirds align-right center-on-mobiles">
      <p>
        Hosted on
        <a href="https://github.com">
          <img src="http://localhost:4000/img/footer-logo.png" alt="GitHub • Social coding">
        </a>
      </p>
    </div>
  </div>
</footer>

  


  <!-- Google Analytics (http://google.com/analytics) -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-462505-8']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</body>

</html>

